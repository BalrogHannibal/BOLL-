name: æ¯æ—¥BOLLè¶…å–é€‰è‚¡

on:
  schedule:
    - cron: '10 20 * * 1-5'  # æ¯å‘¨ä¸€è‡³å‘¨äº”ï¼Œå¤šä¼¦å¤šæ—¶é—´ 16:10ï¼ˆå³ UTC 20:10ï¼‰
  workflow_dispatch:              # æ”¯æŒæ‰‹åŠ¨è§¦å‘

permissions:
  contents: write                 # å…è®¸ workflow å‘ä»“åº“å†™å…¥æ–‡ä»¶

jobs:
  run-boll-screener:
    runs-on: ubuntu-latest

    steps:
    - name: å…‹éš†ä»“åº“
      uses: actions/checkout@v3

    - name: è®¾ç½® Python ç¯å¢ƒ
      uses: actions/setup-python@v4
      with:
        python-version: "3.10"

    - name: å®‰è£…ä¾èµ–
      run: pip install -r requirements.txt

    - name: æ‰§è¡Œ BOLL é€‰è‚¡è„šæœ¬
      run: python boll_screener.py

    - name: æäº¤ç­›é€‰ç»“æœåˆ°ä»“åº“
      run: |
        git config --global user.name "github-actions"
        git config --global user.email "github-actions@github.com"
        git add results/boll_oversold_results.csv
        git commit -m "ğŸ“ˆ è‡ªåŠ¨æ›´æ–°ï¼šBOLL è¶…å–é€‰è‚¡ç»“æœ $(date +'%Y-%m-%d')" || echo "æ— æ›´æ–°ï¼Œè·³è¿‡æäº¤"
        git push || echo "æ— æ›´æ–°ï¼Œè·³è¿‡æ¨é€"



